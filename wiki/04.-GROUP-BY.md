## Grouping Data Using GROUP BY

The `GROUP BY` statement is used in SQL to group rows that have the same values in one or more columns. This statement is often used with aggregate functions such as `COUNT()`, `SUM()`, `AVG()`, `MAX()`, and `MIN()` to perform calculations on groups of data.

### Example of Using `GROUP BY`:

```sql
SELECT location, AVG(prcp) AS avg_prcp
FROM data_new
GROUP BY location;
```

## GROUP BY vs. Column Aliases

When using column aliases in an SQL query, it is important to know that aliases cannot be used directly in the `GROUP BY` expression. An alias is created in the `SELECT` phase, which is later than the `GROUP BY` phase. Therefore, you must use the original column name or expression in the `GROUP BY` expression.

### Example of Aliases and `GROUP BY`:

```sql
SELECT location AS city, AVG(prcp) AS avg_prcp
FROM data_new
GROUP BY location
```

Aggregate functions perform calculations on multiple values and return a single value. Common aggregate functions include:

- **`COUNT()`**: Counts the number of rows. Counts the number of records, including those with NULL values if `COUNT(*)` is used, or only non-NULL values when using `COUNT(column_name)`.

- **`SUM()`**: Adds up the values in a column. Used for columns with numeric values and sums all values, ignoring NULL values.

- **`AVG()`**: Calculates the average of values in a column. Computes the average of numeric values, ignoring NULL values.

- **`MAX()`**: Finds the maximum value in a column. Determines the highest value in the column, ignoring NULL values.

- **`MIN()`**: Finds the minimum value in a column. Determines the lowest value in the column, ignoring NULL values.

- **`STDEV()`**: Computes the standard deviation for a given column.

- **`VAR()`**: Computes the variance for a given column.

### Example of Using Aggregate Functions:

```sql
SELECT location,
       SUM(prcp) AS sum_prcp, 
       AVG(prcp) AS avg_prcp, 
       MAX(prcp) AS max_prcp
FROM data_new
GROUP BY location;
```

## Aggregate Functions and Handling NULL Values

NULL values in SQL Server represent unknown or missing values. When working with NULL values, it's important to understand how different aggregate functions behave, as NULL values can affect the results of calculations.

### Behavior of Aggregate Functions with NULL Values:

- **`COUNT(column_name)`**: Counts only non-NULL values in the column. NULL values are ignored.

- **`COUNT(*)`**: Counts all rows, including those with NULL values.

- **`SUM()`**: Adds up all non-NULL values in the column. NULL values are ignored, meaning they do not contribute to the total sum.

- **`AVG()`**: Calculates the average of only non-NULL values. NULL values are ignored, so they do not affect the average.

- **`MAX()`** and **`MIN()`**: These functions return the maximum or minimum value in the column, ignoring NULL values.

